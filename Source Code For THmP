#include<stdio.h>
#include<stdlib.h>
#include<string.h>
#include<conio.h>  
void encrypt(char answer[100])
{
    printf("Enter a string: ");

	int p=0;
	do
    {
		answer[p]=getch();
        
		if(answer[p]!='\r')
        {
			printf("*");
		}
		p++;
	}while(answer[p-1]!='\r');
	answer[p-1]='\0'; 
	getch();
}
void main() 
{
  char answer[100]; //char array
  int s = 0;// counter for no of tries
  int mistakes = 0,found = 0; 
  printf("Rules of the game HANGMAN:\n");
  printf("1. You have to guess the word given.\n");
  printf("2. Make 6 wrong guesses and you will be hanged!\n");
  printf("3. In case of right guess, the person with the least number of tries wins!\n");
  printf("\n\n\t\t\t *** HANGMAN *** \n");
  printf("\n\n\t\t\t ********* \n");
  
  encrypt(answer);

  int N = strlen(answer); // n stores the length of string
  int mask[N]; // integer array of size length equal to string
  for (int i=0; i < N; ++i) 
  {
    mask[i] = 0; // 0 = false
  }

  // Loop over each round of guessing
  int gameover = 0;  // counter for knowing if the word has been guessed
  while (! gameover && mistakes<6) 
  {
    // Print word with *s for unguessed letters
    printf("\nThe word is : ");
    for(int j=0; j < N; ++j) 
    {
      if (mask[j]) 
      {     
        printf("%c", answer[j]);
      }
      else 
      {
        printf("*");
      }
    }
    printf("\n");
    printf("You have made %d mistakes",mistakes);
    printf("\n");

    // Get player's next guess
    char guess;
    printf("Enter a letter: ");
    scanf(" %c", &guess);
    s++; //incrimentation of number of tries counter
    // Mark true all mask positions corresponding to guess
    for(int k=0; k < N; ++k) 
    {
      if (answer[k] == guess) 
      {
        mask[k] = 1;
        found = 1;
      } 
    }
    if (!found)
    {
        ++mistakes;
    }
    found = 0;
    
    // Determine whether the player has won!
    gameover = 1;
    for(int m = 0; m < N; ++m) 
    {
      if (!mask[m]) 
      {
        gameover = 0;
        break;
      }
    }
  }
  if (mistakes <6)
  {
    // Print victory message!
    printf("Victory! The word was \"%s\".\n", answer);
    printf("You took %d tries.\n",s);

    if(s <= strlen(answer))
    {
          printf("Excellent work. You are a great player!!!.");
    }
    else if (s>strlen(answer))
    {
          printf("Great job, but you can do better!!");
    }
  }
  else
  {
      printf("Sorry. You made 6 mistakes. You have been HANGED!!!!");
  }
}
